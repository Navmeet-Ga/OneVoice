<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OneVoice</title>
  <link rel="icon" type="image/png" href="logo.jpg">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
  body {
      font-family: Arial, sans-serif;
      background: linear-gradient( 180deg, #171b35 100%);
      margin: 0;
      padding: 0;
  }
  .Header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 75px;
  padding: 15px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 1000;
  background: rgba(11,10,16,0.7);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .nav {
  display: flex;
  gap: 15px;
  align-items: center;  
  }
  .nav-links{
      display:flex;
      gap:18px;
      align-items:center
    }
  #cors:hover, #featrs:hover, #qres:hover, #setngs:hover{
    transform: translateY(-8px) rotate(5deg) rotate(-2deg) scale(1.02);
    transition: all 0.5s ease;
    fill-opacity: 0.8;
  } 
  .nav-links a{
    color: wheat;
    text-decoration:none;
    font-weight:600
    
  }
  .btn {
  align-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.05);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  }

  .btn:hover {
  background: rgba(123, 104, 238, 0.1);
  border-color: #fc9504;
  box-shadow: 0 0 25px #7b68ee70, inset 0 0 10px #7b68ee30;
  transform: scale(1.1);
  animation: glowPulse 1.2s infinite alternate;
  }

  .btn img {
  width: 30px;
  height: 25px;

  filter: brightness(0) invert(1);
  transition: all 0.35s ease;
  }

  .btn:hover img {
  filter: brightness(100) invert(37%) sepia(92%) saturate(677%) hue-rotate(341deg) brightness(96%) contrast(103%);
  transform: scale(1.15);
  }

  /* Tooltip label */
  .btn span {
  position: absolute;
  bottom: 55px;
  background: #0fea37;
  color: white;
  padding: 6px 14px;
  border-radius: 10px;
  font-size: 12px;
  opacity: 10;
  transform: translateY(15px);
  transition: all 0.35s ease;
  pointer-events: none;
  border: 1px solid rgba(235, 8, 8, 0.099);
  white-space: nowrap;
  }

  .btn:hover span {
  opacity: 10;
  transform: translateY(0);
  }

  .btn span::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
  border-color: #330ed7 transparent transparent transparent;
  }

  .Heading {
    text-align: left;
    color: rgba(172, 5, 249, 0.759);
    font-size: 24px;
    font-weight: 700;
    letter-spacing: 3px;
    text-decoration: none;
    transition: 0.3s ease;
    padding-right: 75vh;

  }

  .Heading:hover{
    text-shadow: #8c75d689 0 5px, #7b00ff97 0 10px;
  }

  .logo{
    width: 200px;
    height: 170px;
    margin-right: 70px;
  }
    .drag-area {
      border: 2px dashed #cbd5e0;
      border-radius: 12px;
      transition: 0.3s;
    }
    .drag-area.dragover {
      background: #ebf8ff;
      border-color: #3182ce;
    }
    .img-preview { height: 110px; object-fit: cover; border-radius: 8px; }

         /* small utility */
  .hidden{ display:none !important }

  .spark {
    position: fixed;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, var(--spark-color) 0%, transparent 70%);
    border-radius: 50%;
    pointer-events: none;
    animation: sparkAnim 0.8s ease-out forwards;
    z-index: 9999;
    filter: drop-shadow(0 0 6px var(--spark-color));
  }

  @keyframes sparkAnim {
    0% {
      transform: scale(0.6);
      opacity: 1;
    }
    80% {
      opacity: 1;
    }
    100% {
      transform: scale(1.2) translate(var(--x), var(--y));
      opacity: 0;
    }
  }
  </style>
</head>
<body class="bg-gray-100 p-6">
    <div class="Header">
  <div class="nav">
      <div class="nav-links">
        <a id="cors" href="Courses.html">Courses</a>
        <a id="featrs" href="Work.html">Features</a>
        <a id="qres" href="Report & Queries.html">Report & Queries</a>
      </div>
  </div>
  <br>
  <br>
      <a href="index.html" class="Heading"><b>ùêéùêßùêûùêïùê®ùê¢ùêúùêû</b></a>
  </div>
  <br>
  <br>
  <div class="container mx-auto mt-10">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

      <!-- Form Section -->
      <div class="bg-white p-6 rounded-2xl shadow-xl md:col-span-1">

        <label class="font-semibold text-sm">Query Regarding</label>
        <textarea id="subject" class="w-full p-2 border rounded mt-2"></textarea>
        <label class="font-semibold text-sm mt-4 block">Your Question</label>
        <textarea id="questionText" rows="5" class="w-full p-3 border rounded-lg mt-2"></textarea>

        <!-- Drag and Drop -->
        <label class="font-semibold text-sm mt-4 block">Attach Images</label>
        <div id="dragArea" class="drag-area p-6 text-center text-gray-500 cursor-pointer">
          <p>Drag & Drop images here</p>
          <p class="text-xs">or click to browse</p>
        </div>
        <input id="imageInput" type="file" accept="image/*" multiple class="hidden" />

        <div id="imagePreview" class="grid grid-cols-3 gap-3 mt-4"></div>

        <button onclick="submitQuery()" class="mt-5 w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 shadow">Submit</button>
        <button onclick="clearForm()" class="mt-3 w-full border py-3 rounded-xl">Clear</button>
      </div>

      <!-- Query List -->
      <div class="md:col-span-2">
        <input id="searchBox" placeholder="Search queries..." class="w-full p-3 border rounded-xl mb-4" oninput="renderQueries()" />

        <div id="queryList" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
      </div>
    </div>
  </div>

<script>
  let queries = JSON.parse(localStorage.getItem('simple_queries') || '[]');
  let imagesTemp = [];

  const dragArea = document.getElementById('dragArea');
  const fileInput = document.getElementById('imageInput');

  dragArea.addEventListener('click', () => fileInput.click());
  fileInput.addEventListener('change', handleFiles);

  // Drag events
  dragArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    dragArea.classList.add('dragover');
  });

  dragArea.addEventListener('dragleave', () => dragArea.classList.remove('dragover'));

  dragArea.addEventListener('drop', (e) => {
    e.preventDefault();
    dragArea.classList.remove('dragover');
    handleFiles({ target: { files: e.dataTransfer.files } });
  });

  function handleFiles(e) {
    const files = Array.from(e.target.files);
    const preview = document.getElementById('imagePreview');

    files.forEach(file => {
      const url = URL.createObjectURL(file);
      imagesTemp.push({ file, url });

      const img = document.createElement('img');
      img.src = url;
      img.className = 'img-preview border shadow-sm';
      preview.appendChild(img);
    });
  }

  function submitQuery() {
    const text = document.getElementById('questionText').value.trim();
    const subject = document.getElementById('subject').value;

    if (!text && imagesTemp.length === 0)
      return alert('Enter a question or attach an image.');

    const newQuery = {
      id: Date.now(),
      text,
      subject,
      images: imagesTemp.map(i => i.file.name),
      createdAt: new Date().toLocaleString()
    };

    queries.unshift(newQuery);
    localStorage.setItem('simple_queries', JSON.stringify(queries));

    clearForm();
    renderQueries();
  }

  function clearForm() {
    document.getElementById('questionText').value = '';
    document.getElementById('imagePreview').innerHTML = '';
    imagesTemp = [];
  }

  function deleteQuery(id) {
    queries = queries.filter(q => q.id !== id);
    localStorage.setItem('simple_queries', JSON.stringify(queries));
    renderQueries();
  }

  function renderQueries() {
    const search = document.getElementById('searchBox').value.toLowerCase();
    const container = document.getElementById('queryList');
    container.innerHTML = '';

    const filtered = queries.filter(q =>
      q.text.toLowerCase().includes(search) || q.subject.toLowerCase().includes(search)
    );

    if (filtered.length === 0) {
      container.innerHTML = '<div class="col-span-2 text-gray-500 text-center">No queries found.</div>';
      return;
    }

    filtered.forEach(q => {
      const card = document.createElement('div');
      card.className = 'bg-white p-5 rounded-2xl shadow-md hover:shadow-lg transition';

      card.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="bg-blue-100 text-blue-700 font-bold w-12 h-12 rounded-full flex items-center justify-center text-lg">${q.subject[0]}</div>
          <div>
            <div class="font-semibold text-lg">${q.subject}</div>
            <div class="text-xs text-gray-500">${q.createdAt}</div>
          </div>
        </div>
        <p class="mt-4 text-gray-700 text-sm">${q.text || '(image only)'}</p>
        <div class="text-xs text-gray-400 mt-3">Images: ${q.images.join(', ')}</div>
        <button onclick="deleteQuery(${q.id})" class="mt-4 text-red-500 text-sm">Delete</button>
      `;

      container.appendChild(card);
    });
  }

  renderQueries();

  // Circular spark effect with random color each click
    document.addEventListener('click', e => {
      const sparkCount = 15; // number of sparks in a circle
      const radius = 30; // radius of the circle

      // Generate a random color (HSL gives smooth hue variations)
      const randomHue = Math.floor(Math.random() * 360);
      const color = `hsl(${randomHue}, 100%, 60%)`;

      for (let i = 0; i < sparkCount; i++) {
        const angle = (i / sparkCount) * 2 * Math.PI;
        const x = Math.cos(angle) * radius + 'px';
        const y = Math.sin(angle) * radius + 'px';

        const spark = document.createElement('div');
        spark.classList.add('spark');
        spark.style.left = `${e.clientX}px`;
        spark.style.top = `${e.clientY}px`;
        spark.style.setProperty('--x', x);
        spark.style.setProperty('--y', y);
        spark.style.setProperty('--spark-color', color);

        document.body.appendChild(spark);
        spark.addEventListener('animationend', () => spark.remove());
      }
    });
</script>
</body>
</html>
